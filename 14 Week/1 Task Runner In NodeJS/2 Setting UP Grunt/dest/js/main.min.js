let socket=io.connect("http://localhost:3000"),userName=prompt("Enter your name:"),profilePic=prompt("Enter the URL of your profile picture:"),currentRoom=(profilePic?document.getElementById("user-avatar").style.backgroundImage=`url(${profilePic})`:(document.getElementById("user-avatar").textContent=userName.charAt(0).toUpperCase(),document.getElementById("user-avatar").classList.add("avatar-placeholder")),document.getElementById("user-name").textContent="Welcome "+userName+"!",socket.emit("new_user",{userName:userName,profilePic:profilePic}),"General");function showNotification(e){let t=document.getElementById("notification-panel");document.getElementById("notification-message").textContent=e,t.classList.remove("hidden"),t.classList.add("visible"),setTimeout(()=>{t.classList.remove("visible"),t.classList.add("hidden")},2e3)}function displayMessage(e){var t=document.createElement("audio"),t=(t.src="./sound.wav",t.play(),t.remove(),document.getElementById("message-list")),s=document.createElement("div");s.classList.add("message"),e.sender===userName?s.classList.add("message-right"):s.classList.add("message-left"),s.innerHTML=e.profilePic?`
          <div class="avatar" style="background-image: url('${e.profilePic}');"></div>
          <div class="message-content">
            <h4>${e.sender} <span>${new Date(e.createdAt).toLocaleTimeString()}</span></h4>
            <p>${e.message}</p>
          </div>
        `:`
          <div class="avatar avatar-placeholder">${e.sender.charAt(0).toUpperCase()}</div>
          <div class="message-content">
            <h4>${e.sender} <span>${new Date(e.createdAt).toLocaleTimeString()}</span></h4>
            <p>${e.message}</p>
          </div>
        `,t.appendChild(s),t.scrollTop=t.scrollHeight}socket.emit("join_room",currentRoom),socket.on("online_users",e=>{if(1==e.length)document.getElementById("count").textContent="No one is online.";else{document.getElementById("count").innerText=e.length-1;let a=document.getElementById("user-list");a.innerHTML="",e.forEach(t=>{var s=document.createElement("li");if(t.userName!==userName){let e="";e=t.profilePic?`<div class="avatar" style="background-image: url('${t.profilePic}')"></div>`:`<div class="avatar avatar-placeholder">${t.userName.charAt(0).toUpperCase()}</div>`,s.innerHTML=`
  ${e}
  <span class="user-name">${t.userName}</span>
  <span class="status-dot active"></span> <!-- Add this for active status -->
  `,a.appendChild(s)}})}}),socket.on("load_chat",e=>{document.getElementById("message-list").innerHTML="",e.forEach(e=>displayMessage(e))}),socket.on("message_received",e=>{displayMessage(e)}),socket.on("typing",e=>{document.getElementById("typing-indicator").textContent=e.userName+" is typing...",setTimeout(()=>document.getElementById("typing-indicator").textContent="Typing Indicator : ",1e3)}),document.getElementById("send-message").addEventListener("click",()=>{var e=document.getElementById("message-input").value.trim();e&&(socket.emit("new_message",{message:e,room:currentRoom}),document.getElementById("message-input").value="")}),document.getElementById("message-input").addEventListener("input",()=>{socket.emit("typing",currentRoom)}),socket.on("new_user",e=>{showNotification(e.userName+" has joined the room")}),console.log("Hello world! 2");